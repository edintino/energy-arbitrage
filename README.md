# ⚡ Energy Arbitrage Battery Optimisation

## 📌 Overview

This project optimises battery usage for industrial-scale energy arbitrage, specifically targeting European day-ahead electricity markets. By intelligently scheduling battery charging during low-price periods and discharging during high-price periods, it maximises financial returns while maintaining battery health.

**Objective:** Maximise profit (€/kWh) while preserving battery longevity.

**Methods Used:**

* **Risk-Averse Optimisation (DRO MILP)**: Uses Mixed Integer Linear Programming (MILP) for robust decision-making.
* **Greedy Baseline Strategy:** A simple heuristic for baseline comparison.

---

## 🎯 Goals & Benefits

* **Optimal Scheduling:** Outperform naive charge/discharge approaches.
* **Increased Revenue:** Enhance profitability per battery cycle.
* **Efficient Utilisation:** Improve battery lifecycle management.
* **Risk Management:** Clearly quantify and manage risk-adjusted returns.

---

## 🔒 Constraints & Assumptions

### Operational Limits

* **State of Charge (SoC):** Maintained between 10% and 90%.
* **Cycle Completion:** Final SoC matches the initial state.

### Modelling Assumptions

* Constant, symmetric charging and discharging rates.
* Linear efficiency (no battery degradation curve considered).
* Price forecasts include Gaussian noise.
* Fixed two-day planning horizon.
* Single market action (buy or sell) per timestep.
* No market volume or transmission fee constraints.

---

## 📐 Optimisation Method (DRO MILP)

The method applies Distributionally Robust Optimisation (DRO) via MILP, ensuring robust performance despite market uncertainties. DRO is particularly suitable here because forecasts are available for a short horizon (2 days) and are generated by perturbing actual prices with Gaussian noise. DRO optimises considering not just the forecast mean but also the variability (sigma), handling uncertainty effectively by preparing for the most pessimistic scenario within a defined risk tolerance. The parameter $\rho$ indicates the expected deviation from the forecast mean in terms of sigma, essentially defining the confidence interval used in the risk assessment.

### Decision Variables:

* **Charge (x⁺) & Discharge (x⁻)** amounts per timestep.
* **Market Participation (z)**: Binary variable indicating market choice per timestep.

### Objective Function:

Maximising risk-adjusted returns:

$$
\text{Maximise } \sum_{t,m} \left[(\mu_{t,m} - \rho \sigma_{t,m}) x_t^+ - (\mu_{t,m} + \rho \sigma_{t,m}) x_t^-\right]
$$

* $\mu_{t,m}$: Forecasted market price
* $\sigma_{t,m}$: Standard deviation of forecast
* $\rho$: Risk aversion coefficient (how many standard deviations from the mean the prediction is expected to lie)

### Constraints:

* SoC management and dynamics
* Min/max SoC buffer compliance
* Charge/discharge rate limits
* Final SoC target

---

## 🧪 Greedy Baseline Strategy

A straightforward heuristic used for benchmarking:

* **Charging:** Select the cheapest hours daily.
* **Discharging:** Select the most expensive hours daily.

Number of slots selected ($n$): approximately equals battery capacity divided by charge rate.

---

## 🚀 Results & Comparison

* Compare the sophisticated DRO MILP approach to the greedy baseline.
* Evaluate relative improvement clearly in profit terms and operational efficiency.

---

## 📊 Visualisation

Interactive visual comparison provided through a Plotly-generated chart:

* SoC timelines
* Action indicators
* Market selections

Chart is saved as `battery_schedule_comparison.html`.

---

## 📂 Project Structure

* **`baseline.py`**: Implements greedy strategy.
* **`config.py`**: Defines battery parameters and simulation settings.
* **`main.py`**: Orchestrates simulation, optimisation, and comparison.
* **`optimization.py`**: Core DRO MILP optimisation algorithm.
* **`plotting.py`**: Generates comparative visualisations.
* **`simulation.py`**: Produces realistic market price forecasts.

---

Enjoy exploring energy arbitrage optimisation! 🌍🔋💡
